\chapter{Basics}
\label{chap:basics}

This chapter is a brief introduction to hydropower. It presents gives an overview of the conversion devices with a focus on run-of-the-river (ROR) power plants.

\section{Types of hydropower plants}

The main types of hydroelectricity generating methods are conventional hydropower (dams), pumped storage plants, run-of-the-river plants and tide power stations. They are defined as follows by the VGB Powertech \cite{vgb}.

\begin{itemize}
 \item Conventional hydroelectricity, or reservoir hydroelectricity, comes from the potential energy of dammed water. In a conventional power plant, the turbine is powered by an inflow from one or several reservoirs. Its use is thereby largely independent from the temporal course of the river flowing into the reservoir.
 \item A pumped storage power plant is a reservoir plant, whose reservoir is completely or partially filled with pumped water. In general, the water is pumped from a lower reservoir, which can be the reservoir of another power plant or a natural water body. A distinction is made between pumped storage with or without natural inflow in the upper reservoir.
 \item Run-of-the-river hydropower plants are hydropower plants that use the natural usable stream without delaying it. They do not accumulate water in a reservoir and are therefore dependent on the flow of the river.
 \item Other types of hydropower include devices converting energy from the tides or the waves.
\end{itemize}


\section{Theory of run-of-the-river power plants}
\subsection{Operating}
Even though there is no reservoir accumulating the water upstream from the plant, run-of-the-river power plants need an altitude difference, called head, between the water surface before and after the plant. This can be achieved through a dam, a derivation of the water stream through a canal, or a lock \cite{tdi_petites_centrales}. The water is lead through a turbine (see Fig. \ref{schema_hpp}) that drives an electrical generator.
\begin{figure}[H]
\centering
\includegraphics[width=15cm]{schema_hpp_en.png}
\caption[Schema of a run-of-the-river hydropower plant]{Schema of a run-of-the-river hydropower plant \cite{quaschning}}
\label{schema_hpp}
\end{figure}
\subsection{Output power}
A run-of-the-river power plant generates a power proportional to the water flow and the head, as seen in Eq. \eqref{eq_power_1} \cite{quaschning}.
\begin{equation}
\label{eq_power_1} 
 P = \rho_\mathrm{water} \cdot g \cdot \dot{V}_\mathrm{turbine} \cdot h \cdot \eta_\mathrm{turbine} \cdot \eta_\mathrm{generator}
\end{equation}
With 
\begin{itemize}
\itemsep0em 
 \item $P$ \tabto{4cm} power produced by the generator \tabto{12cm} [\unit{W}]
 \item $\rho_\mathrm{water}$ \tabto{4cm} density of water \tabto{12cm} \unit[1000]{kg\textperiodcentered m\textsuperscript{-3}}
 \item $g$ \tabto{4cm} acceleration of gravity \tabto{12cm} \unit[9.81]{m\textperiodcentered s\textsuperscript{-2}}
 \item $\dot{V}_\mathrm{turbine}$ \tabto{4cm} water flow through the turbine \tabto{12cm} [\unit{m\textsuperscript{3}\textperiodcentered s\textsuperscript{-1}}]
 \item $h$ \tabto{4cm} head of water \tabto{12cm} [\unit{m}]
 \item $\eta_\mathrm{turbine}$ \tabto{4cm} efficiency of the turbine
 \item $\eta_\mathrm{generator}$ \tabto{4cm} efficiency of the generator
\end{itemize}


The head of water is the altitude difference between the surface of the river before and after the turbine. For run-of-the-river hydropower plants, it is assumed that the water level before the turbine is kept constant by the dam, while the water level downstream can vary. This happens when the water flow exceeds the capacity of the turbine and has to be deviated over the dam. With this assumption, the head of water is given by Eq. \eqref{eq_head}. The water flow in the turbine is at most \.{V}\textsubscript{n}, and an amount of residual water has to be substracted from the available water flow. The amount of residual water is fixed by law to ensure a minimum water flow in the rivers at all time, an is potentially increased by the presence of a fish ladder or a passage for boats. The water flow in the turbine is given by Eq. \eqref{eq_waterflow} \cite{quaschning}.
\begin{equation}
\label{eq_head} 
 h = h_\mathrm{n} +W_\mathrm{n}-W
\end{equation}
\begin{equation}
\label{eq_waterflow} 
 \dot{V}_\mathrm{turbine} = \min(\dot{V}_\mathrm{n},\dot{V}-\dot{V}_\mathrm{res})
\end{equation}
Where $h_\mathrm{n}$, $W_\mathrm{n}$ and $\dot{V}_\mathrm{n}$ are respectively the nominal head, water level downstream from the dam and water flow, and W and \.{V} the real water level and water flow. Equation~\eqref{eq_power_1} becomes:
\begin{equation}
 \label{eq_power_2} 
 P = \rho_\mathrm{water} \cdot g \cdot \min(\dot{V}_\mathrm{n},\dot{V}-\dot{V}_\mathrm{res}) \cdot (h_\mathrm{n} +W_\mathrm{n}-W) \cdot \eta_\mathrm{turbine} \cdot \eta_\mathrm{generator}
\end{equation}

\subsection{Types of turbines}

There are two families of water turbines: action turbines and reaction turbines. Action turbines use the kinetic energy of water, without any changes in pressure, while reaction turbines transform the potential energy of water into kinetic energy, decreasing the pressure. The main types of turbines for each family are \cite{quaschning}:
\begin{itemize}
\item Action turbines
 \begin{itemize}
  \item Pelton turbine
  \item Turgo turbine
  \item Ossberger turbine or cross-flow turbines
 \end{itemize}
 \item[~] 
 \item Reaction turbines
 \begin{itemize}
  \item Kaplan turbines
  \item Bulb or tubular turbines
  \item Francis turbines
 \end{itemize}
\end{itemize}

The four types of turbines used for run-of-the-river plants are Pelton, Francis, Kaplan and crossflow. These turbines have optimal performances over ranges of water flow and hydraulic head: Kaplan turbine are appropriate for low-head plants, Francis for average heads and Pelton for low water flows and high heads.   

\subsection{Turbine and generator efficiencies}
\label{eff_turb_gen}

\subsubsection{Turbine efficiency}
The efficiency of a turbine depends on its type and part-load range \cite{quaschning}\cite{pacer}. Figure \ref{efficiency_turb} gives the efficiency curves of different turbine types depending on the part load. These efficiencies can be approximated by the empiric function given in Eq. \eqref{eq_eff} with the parameters given in Tab. \ref{eff_param} \cite{quaschning}. In this equation, $\dot{V}_\mathrm{min}$ is the minimal water flow to start the turbine, $\dot{V}_\mathrm{n}$ is the nominal water flow of the turbine and $\dot{v}=\frac{\dot{V}-\dot{V}_\mathrm{min}}{\dot{V}_\mathrm{n}}$.

\begin{equation}
 \label{eq_eff}
\eta_\mathrm{T}= \left\{
    \begin{array}{ll}
	0 & \mbox{for } \dot{V} \leq \dot{V}_\mathrm{min}\\
        \frac{\dot{v}}{a_\mathrm{1}+a_\mathrm{2} \cdot \dot{v} + a_\mathrm{3} \cdot \dot{v}^2} & \mbox{for } \dot{V}_\mathrm{min}<\dot{V}<\dot{V}_\mathrm{n} \\
        \eta_\mathrm{T,n} & \mbox{for } \dot{V} \geq \dot{V}_\mathrm{n}
    \end{array}
\right.
\end{equation}


\begin{table}[H]
 \centering
 \caption[Parameters to calculate the turbine efficiency]{Parameters to calculate the turbine efficiency \cite{quaschning}}
 \footnotesize
 \label{eff_param}
 \begin{tabular}{|c|c|c|c|c|c|}
  \cline{2-6}
  \multicolumn{1}{c|}{}&$\dot{V}_\mathrm{min} / \dot{V}_\mathrm{n}$ & $\eta_\mathrm{T,n}$& $a_\mathrm{1}$ & $a_\mathrm{2}$&$a_\mathrm{3}$ \\ 
  \hline
  Kaplan & 0.081& 0.895& 0.045 &0.965& 0.1 \\
  Pelton & 0.07& 0.885& 0.03& 0.99& 0.1\\
  Francis &0.095 &0.89 &0.18 &0.63 &0.31 \\
  Propeller &0.42 &0.9 &0.25 &0.28 &0.69\\
  \hline
 \end{tabular}
\end{table}

\begin{figure}[H]
\centering
\includegraphics[width=12cm]{efficiency_turb_en.png}
\caption[Efficiency of different types of turbines depending on the part load ratio]{Efficiency of different types of turbines depending on the part load ratio (water flow / nominal water flow) \cite{raa89}}
\label{efficiency_turb}
\end{figure}

\subsubsection{Generator efficiency}

The efficiency factor of the generator depends on its power and part-load range \cite{pacer}. The Swiss ``Bundesamt fÃ¼r Konjunkturfragen'' gives the values given in Tab. \ref{eta_gen}.

\begin{table}[H]
 \centering
 \caption[Generator efficiency in full load and part load]{Generator efficiency in full load (left) and part load (right) \cite{pacer}}
 \footnotesize
 \label{eta_gen}
 \begin{tabular}{|C{3cm}|C{3cm}| C{1cm} |C{3cm}|C{3cm}|}
  \cline{1-2} \cline{4-5}
  $P_\mathrm{el} [kW]$ & $\eta_\mathrm{g,max}$  && $P_\mathrm{el}/P_\mathrm{el, max}$ & $\eta_\mathrm{g}/\eta_\mathrm{g,max}$ \\ 
  \cline{1-2} \cline{4-5}
  1 to 5 & \unit[80]{\%} to \unit[85]{\%} && 
  \multirow{4}{*}{\begin{tabular}{c}>\unit[50]{\%}\\\unit[25]{\%} \\\unit[10]{\%} \\\end{tabular}}& 
  \multirow{4}{*}{\begin{tabular}{c}\unit[100]{\%} \\\unit[95]{\%} \\\unit[85]{\%} \\\end{tabular}}\\
  5 to 20 & \unit[85]{\%} to \unit[90]{\%} &&& \\
  20 to 100 & \unit[90]{\%} to \unit[95]{\%} &&&\\ 
  More than 100 & \unit[95]{\%} &&&\\ 
  \cline{1-2} \cline{4-5}
\end{tabular}
\end{table}

\section{Existing models and approaches}

Several hydropower models have been or are being developed, among which: 
\begin{itemize}
 \item The r.green.hydro model, developed by EURAC Research in Bolzano \cite{grass} to work with the GRASS GIS software computes hydropower potential from discharge raster maps with theoretical, legal, technical, ecological or economic constraints.
 \item The simple{\_}hydropower{\_}model from James Sample \cite{sample} estimates the potential impacts of climate change on Scotland's run-of-river hydropower potential. It takes historical and future flow data as input, a user-defined head of water, and set the nominal water flow based on the flow duration curve, and computes the output.
 \item The OSeMOSYS community \cite{osemosys} developed a browser-based open source interface for energy systems modelling which includes hydropower.
 \item The renpass model \cite{wiese} developed by Frauke Wiese is another energy systems modelling tool with a hydropower part developed by Gesine Boekenkamp \cite{gesine}. It uses a mathematical approach to assess the production, based on the capacity utilization of previous years and the water level variations.
 \item Matthias Stark calculated the production from German hydropower in his PhD work, by approximated the nominal water flow of a plant with the mean annual water flow of the river \cite{stark}.
\end{itemize}
The objective of this work was not to asses hydropower potential but rather to develop a model capable of producing feed-in time series of existing plants. Furthermore, the vocation of the model being to be integrated into the oemof framework, it had to be compatible with the other tools of this framework, such as the Open Energy Database and compliant with the guidelines of the Reiner Lemoine Institute in terms of license. The above-mentioned works were reviewed and some similar approaches were used to develop a model compliant with the expectations of the Reiner Lemoine Institute and the openFRED project.