\chapter{Discussion}
\label{chap:discussion}

In this work, an approach towards modeling run-of-the-river power plants and simulating electricity generation based on open access geodatabases was put forward. In this chapter, we will examine to what extent the model and the simulation process fit the specifications defined in section \ref{sub:spec}, discuss their potential applications, their limits, and give some ideas to improve the results.
\section{Consistency with the specifications}

The objectives of this work (see sec. \ref{sub:spec}) were to be able to obtain feed-in time series both from single plants and for large areas and to be compatible with the environment data sets of the OEDB (runoff, river network, ...). The developed model (ch. \ref{chap:simulation_model}), together with the guidelines on preprocessing the data (sec. \ref{sec:data_preproc}), meet these requirements and allows the user to run simulations with various degrees of precision in the input data. However, it was difficult to assess the proper functioning of the model, due to the limited availability of production data. This is discussed further in section \ref{sec:limits}.

\section{Applications of the model}

The model, after being completed following the guidelines given in sec. \ref{sec:improv} and validated, could find applications at different levels. It could be a useful tool for an individual or a society seeking to build a run-of-the-river plant, as it reproduces the design process of a plant. The parameters related to human and economic decisions, such as the percentage of the year the plant should run at full load, can be changed to personalize the process. This is also true of legal parameters such a the residual water flow. \newline
It can also be useful to research institutes or public bodies looking for a way to run state-wide simulations with little information about the plants installed. It could as well be integrated in energy systems modeling and optimization tools.

\section{Limits of the model}
\label{sec:limits}
If the model fulfills the conditions set in the specifications, the chapter presenting the results (ch. \ref{chap:results}) was not conclusive, and failed to lead to a validation of the model.
\subsection{Simulation from precise data}
\label{sub:lim_single}
The single plant simulation over-estimates the production from April to July. This is normal, as the first months of production were a running-in phase, during which the plant did not work to its full capacity. However, the simulated production for August is less than the measured production. This could be due to the very low water flows measured in August : the usable water flow is often under the minimal waterflow of the turbine, which in the model does not produce any power. In reality however the dam is used to retain water upstream from the turbine and release it when it is sufficient to set it in motion. Ideas on how to include this behaviour in the model are given in sec. \ref{sub:impoudment}.

\subsection{Extrapolation of missing data}
\label{sub:lim_extra}
Section \ref{sec:missing_data} showed that values very far from the reality were assigned to the plants during the extrapolation process when done on the wrong runoff values (gauge station located on another river or far away from the plant, or raster cell not matching the river course). However, the assignment of an oversized nominal water flows leads to the assignment of a proportionally undersized water head. Thus, the power output stays consistent, as long as the runoff time series vary in the same order of magnitude as the river the plant should have been assigned to. Ideas on how to improve the assignment to raster cells and gauge stations are given in sec. \ref{sub:imp_assign_cell} and sec. \ref{sub:imp_assign_gauge}.

\subsection{Simulation based on limited data}

The state wide simulations run on Thuringia under-estimate the production. Since they sum the productions from individual plants and use the extrapolation process, they are naturally subject to the uncertainties mentioned in sec. \ref{sub:lim_single} and sec. \ref{sub:lim_extra}. In addition, the comparison with the production data from the AEE is biased since it is not based on the same technologies as the OPDS, and since the installed capacity from these two sources are different. The need for better input and validation data is developed in sec. \ref{sub:imp_data}.

\subsection{Other uncertainties}
\label{sub:limits_others}

In order to simplify the model, assumptions were made in the choice or calculation of simulation parameters. These assumptions, listed below, can also cause errors in the simulation results. 
\begin{itemize}
 \item Calculation of \.V\textsubscript{rest} according to \cite{pacer}. As explained in sec. \ref{sub:extrapol_dV_rest}, the residual water flow is fixed by law and therefore depends on the jurisdiction of the country or federal state. Some legal texts result in a constant value based on the type of river, while others define graded or dynamic residual water flows. According to Giesecke \cite{gies_qrest}, for the same plant and river characteristics, the residual water flow reduces the usable water flow by \unit{4}[\%] to \unit{50}[\%], depending on the legal text used to calculate it. Since the power output is proportional to the usable water flow, it is clear that the method used to calculate the residual water flow will have a big impact on the result. XXX Here a reference to relevant part of ways of improvement XXX
 \item Calculation of \.V\textsubscript{n}. Section \ref{sub:extrapol_dV_n} showed how to extract the nominal water flow from the flow duration curve. The literature distinguishes isolated sites, for which the nominal water flow should be reached 250 days a year, and sites connected to the grid where the nominal water flow should be reached 50 to 90 days a year. In this work, the nominal water flows were chosen to be reached \unit[20]{\%} of the year (around 70 days) and even though this value seems coherent given the results from section \ref{sec:missing_data}, it has a big influence on the overall production of a plant. The production of Thuringia from modeled runoffs was simulated over the year 2008, with different values for this percentage exceedence percentage :  with \unit[20]{\%} the yearly production is \unit[187]{GWh}, with \unit[30]{\%} it rises to \unit[210]{GWh} and with \unit[40]{\%} to \unit[223]{GWh}. Given the impact of this parameter, sec. XXX ref to relevant section from WoI XXX gives ideas on how to adjust its value to fit reality more precisely.
 \item Turbine type assignment. The type of turbine is extracted from the characteristic diagrams, depending on the nominal head and water flow of the turbine. However, Fig. \ref{charac_diag} shows that the characteristic diagrams of different turbine types partly overlap, and the overlapping zones are assigned arbitrarily to the first type tested (Sec \ref{sub:get_type}). The error induced by this simplification is minor, because of the small difference between efficiency curves of the different types. However, ways of improving this process are presented in Sec. \ref{XXX to WoI}.
 \item Approximation of h with h\textsubscript{n}. Section \ref{sub:approx_h} justifies the approximation of h with h\textsubscript{n} due to the difficulty of calculating the water level directly downstream from the plant.  Like all approximations, this reduces the precision of the model. However, assessing the water level from the water flow would require to model precisely the bed of the river downstream from the plant. This task would be very time-consuming and would potentially require more approximations, it is therefore not certain that it would improve the result at all.
\end{itemize}


\section{Ways of improvement}
\label{sec:improv}

This work laid the foundations towards simulating run-of-the-river hydroelectricity within the openFRED project. Section \ref{sec:limits} and chapter \ref{chap:results} identified the limits of the developed model in its current state. However, these problems can be addressed.

\subsection{Assignment to gauge stations}
\label{sub:imp_assign_gauge}
Section \ref{sub:lim_extra} mentioned the problems appearing in the extrapolation process when a plant is assigned to runoff time series not consistent with the river it is actually on. As explained there, this problem does not impact the simulated production much, as long as the runoff time series vary in the same order of magnitude as the river the plant should have been assigned to. In the case of measured runoffs, the situation arises when plants are located on rivers with no gauge station. With the assignment process described in Sec. \ref{sub:pp_reg}, when no gauge station is found on the same river as the plant, the closest gauge station is assigned. \newline
Instead of looking for the closest gauge, the assignment process could search for the next gauge downstream from the plant, based on the XXX GWK XXX
The GWK is and fonctionne comme ça. Therefore, as an example, for a plant located on the blabla, gwk untel, the process would search gauges on gwk untel (telle river), then untel (telle river), then untel (telle river), and assign the plant to station bla on river truc.
METRE UNE IMAGE!
Mettre un pseudo code ?

\subsection{Assignment to raster cells}
\label{sub:imp_assign_cell}
The assignment problem is not limited to measured runoff. Section \ref{sec:missing_data} showed that some cells contain very low runoff data, even though they are located on the course of a river (see Fig. \ref{map_mosel_watergap}). This causes errors in the calculation of the nominal water flow and subsequently in the calculation of the nominal head, and the setting of the turbine type. Even though this does not have such a spectacular impact on the results as the differences in nominal water flows observed in table \ref{tab_res_extra}, because they are compensated by a proportionally oversized head of water, more accurate results would be obtained by assigning coherent runoff values to each plant. \newline
A solution to achieve this would be to rebuild the network of Germany main rivers from the raster of modeled runoffs, by finding local maximums. If each raster cell is represented by a x\textsubscript{i,j} as showed in Fig. XXX make a fig XXX, each vertical border can be assigned with the difference x\textsubscript{i,j} - x\textsubscript{i-1,j} and each horizontal border with the difference x\textsubscript{i,j} - x\textsubscript{i,j-1}. The borders with a local maximum mark the passage of a river, and the course of that river can be found by linking adjacent local maximums. The process was executed manually on telle zone as shown in Fig. XXX another Fig! XXX
Analyser la fig, éventuellent parler de se débarrasser du bruit, de la temporal resolution qui ne permet pas de retracer les plus petites rivières.

\subsection{}

\newline
In the case of modeled water flows, the courses of the main rivers as seen by the raster could be identified, in order to assign the plants with a raster cell containing runoff time series consistent with the river. \newline
 It would be interesting to see if a correlation can be found between the nominal power and the nominal water flow : if \unit[20]{\%} seems to be an acceptable value for big plants like the ones on the Mosel, the smaller HydroRaon seems to have been designed to work at full load \unit[30]{\%} of the time.